Excellent question â€” this is one of the most common confusions when using **Spring Boot + H2** together.  
Letâ€™s go step-by-step ğŸ‘‡

---

### ğŸ§© The Problem

By default, **H2 in Spring Boot** runs in **in-memory mode** (`jdbc:h2:mem:testdb`), which means:

- The database exists **only while the app is running**.
    
- As soon as you stop and rerun the application, the entire database (and data) is **cleared**.
    

Thatâ€™s why your data â€œvanishesâ€ each time you restart.

---

### âœ… The Solution: Use **File-based H2 Database**

You can persist the data by switching from **in-memory** to **file-based** storage.

---

### âš™ï¸ Step 1: Edit `application.properties` (or `application.yml`)

Change your datasource URL to a **file path** instead of `mem:`.

#### Example for `application.properties`:

```properties
spring.datasource.url=jdbc:h2:file:./data/mydb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true
```

> ğŸ—‚ï¸ `jdbc:h2:file:./data/mydb`
> 
> - Creates a file `mydb.mv.db` in a local `data` folder under your project directory.
>     
> - The data remains **even after you stop and restart** your Spring Boot app.
>     

---

### âš™ï¸ Step 2: Keep Hibernate from Dropping Tables

If you use `spring.jpa.hibernate.ddl-auto=create` or `create-drop`, it **recreates tables** every time.

âœ… Use:

```properties
spring.jpa.hibernate.ddl-auto=update
```

This ensures:

- Schema is updated automatically (not dropped).
    
- Data is **kept** across restarts.
    

---

### âš™ï¸ Step 3: (Optional) Enable H2 Console

If you want to view your database in the browser:

```properties
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
```

Then visit:  
ğŸ‘‰ `http://localhost:8080/h2-console`

and use:

```
JDBC URL: jdbc:h2:file:./data/mydb
User Name: sa
Password: (leave blank)
```

---

### âš™ï¸ Step 4 (Optional): Use Absolute Path (if needed)

If you want to store the DB in a fixed folder (e.g., `C:/h2db`):

```properties
spring.datasource.url=jdbc:h2:file:C:/h2db/mydb
```

---

### ğŸ§  Summary

|Mode|URL Example|Data Persistence|
|---|---|---|
|In-memory|`jdbc:h2:mem:testdb`|âŒ Lost on restart|
|File-based|`jdbc:h2:file:./data/mydb`|âœ… Saved across restarts|

---

Would you like me to show how to configure the same using `application.yml` instead of `.properties`?